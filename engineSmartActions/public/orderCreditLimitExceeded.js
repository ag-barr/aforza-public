function runAction(e){try{const{record:i,related:d}=e.data,[a]=d.Account,[c]=d.RecordType,r=a.AvailableCredit__c,t=i.TotalAmount;if(c.DeveloperName==="FieldDirectOrder"){if(r==null)throw new Error("No credit limit available");if(t==null)throw new Error("No order total available");if(t>r)throw new Error(`Credit Limit Exceeded - Current credit: ${r} and Order Total is ${t}`);e.data.message=`Order total ${t} is within credit limit of ${r}`}}catch(i){e.data.error=JSON.stringify(related)}return e.data.updateDeviceData=!0,e.data.updateDeviceData.Order=!0,e.data.updateDeviceData.OrderItem=!0,e.data.reprice=!0,e}
